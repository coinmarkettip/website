function sleep(a){for(var b=(new Date).getTime(),c=0;c<1e7&&!((new Date).getTime()-b>a);c++);}$(function(){App.controller.homeHome=function(){function a(){return App.pageConfig.coins}function b(a){App.pageConfig.coins=a,dataManager.setCookie("coins",JSON.stringify(a),365)}function c(){var b=a();return b.length>0}function d(){if(App.pageConfig.coins.length>0)return!0;var a=dataManager.getCookie("coins");return""!=a&&(App.pageConfig.coins=$.parseJSON(a),App.pageConfig.coins.length>0)}function e(){var a={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,c,d){d.indexOf("#")>-1&&(d=d.split("#"),d=d[0]),a[c]=d});return a}function f(){var a=e();App.pageConfig.searchCriteriaValues=App.pageConfig.searchCriteriaDefaultValues;for(var b in a)$.inArray(b,App.pageConfig.searchCriteriaKeys)>=0&&(App.pageConfig.searchCriteriaValues[b]=a[b])}function g(){for(var a in App.pageConfig.searchCriteriaValues)if("keyword"==a){if($("#search_keyword").val(App.pageConfig.searchCriteriaValues[a]),""!=App.pageConfig.searchCriteriaValues[a]){App.pageConfig.numberOfChosenOptions=0,$("#search_options").fadeOut(180);break}$("#search_options").fadeIn(180)}else{var b=App.pageConfig.searchCriteriaValues[a],c=App.pageConfig.searchOptionsIds[a];h(b,c,$("#"+c+"_"+b).html())}}function h(a,b,c){var d=$("#"+b).val();if(a!=d){switch($("#"+b+"_"+d).css("font-weight",""),$("#"+b+"_"+a).css("font-weight","bold"),$("#"+b+"_title").html(c),$("#"+b).val(a),0==a?App.pageConfig.numberOfChosenOptions--:0==d&&App.pageConfig.numberOfChosenOptions++,b){case"search_available_supply_range":0==a?($("#search_max_supply_range_div").show(),$("#search_max_supply_range_div_disabled").hide()):($("#search_max_supply_range_div").hide(),$("#search_max_supply_range_div_disabled").show());break;case"search_max_supply_range":0==a?($("#search_available_supply_range_div").show(),$("#search_available_supply_range_div_disabled").hide()):($("#search_available_supply_range_div").hide(),$("#search_available_supply_range_div_disabled").show())}0==App.pageConfig.numberOfChosenOptions?$("#search_keyword").removeAttr("disabled"):$("#search_keyword").attr("disabled",!0)}}function j(){var a=e(),b=[];0==Object.keys(a).length&&(a=App.pageConfig.sortOptionDefaultValues);for(var c in App.pageConfig.searchCriteriaKeys)a[App.pageConfig.searchCriteriaKeys[c]]=App.pageConfig.searchCriteriaValues[App.pageConfig.searchCriteriaKeys[c]];for(var d in a)b.push(d+"="+a[d]);b=b.join("&"),b=""!=b?"?"+b:"",Router.navigate(b),addthis.layers.refresh()}function k(){m(),App.pageConfig.coinmarketcapCanRequest===!0?dataManager.connect("coinmarketcap_api").ajax("/v1/ticker/?limit=0","GET",[],"plain",function(a,c){App.pageConfig.coinmarketcapCanRequest=!1,b(a),l()},function(a,b){d(),l()}):(d(),l())}function l(){if($("#results_filters").fadeOut(180),$("#results_list").fadeOut(180),$("#no_results_found").fadeOut(180),$("#error_message").fadeOut(180),c()===!0){var b=a();if(""!=App.pageConfig.searchCriteriaValues.keyword||App.pageConfig.numberOfChosenOptions>0){if(App.pageConfig.coinResults=[],""!=App.pageConfig.searchCriteriaValues.keyword){if(1==App.pageConfig.searchCriteriaValues.keyword.length)return void n();for(var d in b)(b[d].name.indexOf(App.pageConfig.searchCriteriaValues.keyword)>=0||b[d].symbol.indexOf(App.pageConfig.searchCriteriaValues.keyword)>0)&&App.pageConfig.coinResults.push(b[d])}else{var e=0;for(var d in b)e=0,0!=App.pageConfig.searchCriteriaValues.mcr&&(null==b[d].market_cap_usd&&(b[d].market_cap_usd=0),App.pageConfig.searchCriterionMcr[App.pageConfig.searchCriteriaValues.mcr].min<=1*b[d].market_cap_usd&&1*b[d].market_cap_usd<=App.pageConfig.searchCriterionMcr[App.pageConfig.searchCriteriaValues.mcr].max&&e++),0!=App.pageConfig.searchCriteriaValues.asr&&(null==b[d].available_supply&&(b[d].available_supply=0),App.pageConfig.searchCriterionAsr[App.pageConfig.searchCriteriaValues.asr]>=1*b[d].available_supply&&e++),0!=App.pageConfig.searchCriteriaValues.msr&&(null==b[d].max_supply&&(b[d].max_supply=0),null!=b[d].max_supply&&App.pageConfig.searchCriterionMsr[App.pageConfig.searchCriteriaValues.msr]>=1*b[d].max_supply&&e++),0!=App.pageConfig.searchCriteriaValues.mur&&(null==b[d].max_supply?e++:App.pageConfig.searchCriterionMur[App.pageConfig.searchCriteriaValues.mur]>=100*(1*b[d].max_supply-1*b[d].available_supply)/(1*b[d].max_supply)&&e++),0!=App.pageConfig.searchCriteriaValues["24v"]&&(null==b[d].market_cap_usd&&(b[d].market_cap_usd=0),App.pageConfig.searchCriterion24v[App.pageConfig.searchCriteriaValues["24v"]]<=1*b[d]["24h_volume_usd"]*100/(1*b[d].market_cap_usd)&&e++),App.pageConfig.numberOfChosenOptions==e&&App.pageConfig.coinResults.push(b[d])}t(),p()}else App.pageConfig.coinResults=b,t(),p()}else o();App.pageConfig.searchInProgress=!1}function m(){$("#search_processing").fadeIn(180)}function n(){$("#search_processing").fadeOut(180),$("#results_filters").fadeOut(180),$("#results_list").fadeOut(180),$("#no_results_found").fadeOut(180),$("#error_message").fadeIn(180)}function o(){$("#search_processing").fadeOut(180),$("#results_filters").fadeOut(180),$("#results_list").fadeOut(180),$("#no_results_found").fadeIn(180),$("#error_message").fadeOut(180)}function p(){if(0==App.pageConfig.coinResults.length)o();else{$("#search_processing").fadeOut(180),$("#results_filters").fadeIn(180),$("#results_list").fadeIn(180),$("#no_results_found").fadeOut(180),$("#error_message").fadeOut(180),$("#results_filters_total_found_results").html(App.pageConfig.coinResults.length),$("#results_list_body").html(""),App.pageConfig.coinResults=Object.values(App.pageConfig.coinResults);var a="";for(i in App.pageConfig.coinResults)a="<tr>",a+="<td>"+(1*i+1)+"</td>",a+='<td class="compact-name-column"><div class="s-s-'+App.pageConfig.coinResults[i].id+' currency-logo-sprite"></div><span class="currency-symbol"><a href="https://coinmarketcap.com/currencies/'+App.pageConfig.coinResults[i].id+'/" target="_blank" rel="nofollow">'+App.pageConfig.coinResults[i].symbol+'</a></span><a class="currency-name-container" href="https://coinmarketcap.com/currencies/'+App.pageConfig.coinResults[i].id+'/" target="_blank" rel="nofollow">'+App.pageConfig.coinResults[i].name+"</a></td>",a+="<td>"+(""==App.pageConfig.coinResults[i].market_cap_usd?"- - -":'<a href="https://coinmarketcap.com/currencies/'+App.pageConfig.coinResults[i].id+'/" target="_blank" rel="nofollow">$'+(1*App.pageConfig.coinResults[i].market_cap_usd>1?(1*App.pageConfig.coinResults[i].market_cap_usd).toLocaleString():1*App.pageConfig.coinResults[i].market_cap_usd)+"</a>")+"</td>",a+="<td>"+(""==App.pageConfig.coinResults[i].price_usd?"- - -":'<a href="https://coinmarketcap.com/currencies/'+App.pageConfig.coinResults[i].id+'/" target="_blank" rel="nofollow">$'+(1*App.pageConfig.coinResults[i].price_usd>1?(1*App.pageConfig.coinResults[i].price_usd).toLocaleString():1*App.pageConfig.coinResults[i].price_usd)+"</a>")+"</td>",a+="<td>"+(""==App.pageConfig.coinResults[i]["24h_volume_usd"]?"- - -":'<a href="https://coinmarketcap.com/currencies/'+App.pageConfig.coinResults[i].id+'/" target="_blank" rel="nofollow">$'+(1*App.pageConfig.coinResults[i]["24h_volume_usd"]>1?(1*App.pageConfig.coinResults[i]["24h_volume_usd"]).toLocaleString():1*App.pageConfig.coinResults[i]["24h_volume_usd"])+"</a>")+"</td>",a+="<td>"+(""==App.pageConfig.coinResults[i].available_supply?"- - -":'<a href="https://coinmarketcap.com/currencies/'+App.pageConfig.coinResults[i].id+'/" target="_blank" rel="nofollow">'+(1*App.pageConfig.coinResults[i].available_supply>1?(1*App.pageConfig.coinResults[i].available_supply).toLocaleString():1*App.pageConfig.coinResults[i].available_supply)+"</a>")+"</td>",a+="<td>"+(1*App.pageConfig.coinResults[i].percent_change_1h>=0?'<span class="text-green">+'+App.pageConfig.coinResults[i].percent_change_1h+"</span>":'<span class="text-red">'+App.pageConfig.coinResults[i].percent_change_1h+"</span>")+"</td>",a+="<td>"+(1*App.pageConfig.coinResults[i].percent_change_1h>=0?'<span class="text-green">+'+App.pageConfig.coinResults[i].percent_change_24h+"</span>":'<span class="text-red">'+App.pageConfig.coinResults[i].percent_change_1h+"</span>")+"</td>",a+='<td><a href="https://coinmarketcal.com/pastevents?form%5Bcoin%5D%5B%5D='+App.pageConfig.coinResults[i].name+"+%28"+App.pageConfig.coinResults[i].symbol+'%29" target="_blank" rel="nofollow">Past</a><br /><a href="https://coinmarketcal.com/?form%5Bcoin%5D%5B%5D='+App.pageConfig.coinResults[i].name+"+%28"+App.pageConfig.coinResults[i].symbol+'%29" target="_blank" rel="nofollow">Upcoming</a></td>',a+='<td><a href="https://coinmarketcap.com/currencies/'+App.pageConfig.coinResults[i].id+'/#markets" target="_blank" rel="nofollow">Markets</a><br /><a href="https://coinmarketcap.com/currencies/'+App.pageConfig.coinResults[i].id+'/#social" target="_blank" rel="nofollow">Social</a><br /><a href="https://www.tradingview.com/ideas/'+App.pageConfig.coinResults[i].symbol+'/" target="_blank" rel="nofollow">Trading Ideas</a><br /><a href="coincheckup.com/coins/'+App.pageConfig.coinResults[i].symbol+'/predictions/" target="_blank" rel="nofollow">Target price</a></td>',a+="</tr>",$("#results_list_body").append(a)}}function q(){var a=e();App.pageConfig.sortOptionValues=App.pageConfig.sortOptionDefaultValues;for(var b in a)$.inArray(b,App.pageConfig.sortOptionKeys)>=0&&(App.pageConfig.sortOptionValues[b]=a[b])}function r(){for(var a in App.pageConfig.sortOptionValues)$("#results_filters_"+a).val(App.pageConfig.sortOptionValues[a])}function s(a,b){var c=1;return"-"===a[0]&&(c=-1,a=a.substr(1)),function(d,e){switch(b){case"ASC":var f=1*d[a]<1*e[a]?-1:1*d[a]>1*e[a]?1:0;break;case"DESC":var f=1*d[a]<1*e[a]?1*d[a]>1*e[a]?0:1:-1}return f*c}}function t(){App.pageConfig.coinResults=App.pageConfig.coinResults.sort(s(App.pageConfig.sortOption[App.pageConfig.sortOptionValues.order_by],App.pageConfig.sortOptionValues.type))}function u(){var a=e(),b=[];0==Object.keys(a).length&&(a=App.pageConfig.searchCriteriaValues);for(var c in App.pageConfig.sortOptionKeys)a[App.pageConfig.sortOptionKeys[c]]=App.pageConfig.sortOptionValues[App.pageConfig.sortOptionKeys[c]];for(var d in a)b.push(d+"="+a[d]);b=b.join("&"),b=""!=b?"?"+b:"",Router.navigate(b),addthis.layers.refresh()}App.pageConfig.numberOfChosenOptions=0,App.pageConfig.coinmarketcapCanRequest=!0,App.pageConfig.searchInProgress=!1,App.pageConfig.searchOptionsIds={mcr:"search_market_cap_range",asr:"search_available_supply_range",msr:"search_max_supply_range",mur:"search_max_unreleased_range","24v":"search_24_volume"},App.pageConfig.searchCriteriaKeys=["keyword","mcr","asr","msr","mur","24v"],App.pageConfig.searchCriteriaDefaultValues={keyword:"",mcr:0,asr:0,msr:0,mur:0,"24v":0},App.pageConfig.searchCriteriaValues={keyword:"",mcr:0,asr:0,msr:0,mur:0,"24v":0},App.pageConfig.coins=[],App.pageConfig.coins.length=0,App.pageConfig.coinResults=[],App.pageConfig.coinResults.length=0,App.pageConfig.searchCriterionMcr={1:{min:0,max:5e5},2:{min:5e5,max:1e6},3:{min:1e6,max:2e6},4:{min:2e6,max:5e7},5:{min:5e7,max:15e7},6:{min:15e7,max:5e8},7:{min:5e8,max:1e81}},App.pageConfig.searchCriterionAsr={1:5e6,2:1e7,3:5e7,4:1e8,5:2e8,6:5e8},App.pageConfig.searchCriterionMsr={1:5e6,2:1e7,3:5e7,4:1e8,5:2e8,6:5e8},App.pageConfig.searchCriterionMur={1:0,2:5,3:10,4:20,5:30,6:50},App.pageConfig.searchCriterion24v={1:2,2:3,3:5,4:10,5:20,6:30,7:40,8:50},App.pageConfig.sortOption={1:"market_cap_usd",2:"24h_volume_usd",3:"available_supply",4:"max_supply",5:"percent_change_1h",6:"percent_change_24h",7:"percent_change_7d",8:"price_usd",9:"price_btc"},App.pageConfig.sortOptionKeys=["order_by","type"],App.pageConfig.sortOptionDefaultValues={order_by:1,type:"DESC"},App.pageConfig.sortOptionValues={order_by:1,type:"DESC"},$('[data-toggle="tooltip"]').tooltip(),$("#search_keyword").on("keyup",function(){App.pageConfig.searchCriteriaValues.keyword=$(this).val(),""==$(this).val()?$("#search_options").fadeIn(180):$("#search_options").fadeOut(180)}),$(".dropdown-menu li a").click(function(){var a=$(this).data("id");el_type=$(this).data("type");for(var b in App.pageConfig.searchOptionsIds)if(App.pageConfig.searchOptionsIds[b]==el_type){App.pageConfig.searchCriteriaValues[b]=a;break}h(a,el_type,$(this).text())}),$("#results_filters_order_by").on("change",function(){App.pageConfig.sortOptionValues.order_by=$(this).val(),u(),m(),t(),p()}),$("#results_filters_type").on("change",function(){App.pageConfig.sortOptionValues.type=$(this).val(),u(),m(),t(),p()}),f(),g(),q(),r(),k(),$("#search_coin_search").on("click",function(a){a.preventDefault(),a.stopImmediatePropagation(),App.pageConfig.searchInProgress===!1&&(App.pageConfig.searchInProgress=!0,j(),k())})}}),$(function(){App.controller.pageAbout=function(){},App.controller.pageFaq=function(){}}),this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},this.Handlebars.templates.empty=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return""},useData:!0});var config={app:{interval:6e4,interval_not_focused:12e4,lang_period:3650,default_lang:"en_UK",default_lang_code:1},data_manager:{coinmarketcap_api:"https://api.coinmarketcap.com"}},App={controller:{},listener:null,listener_interval:null,lang:null,langCode:0,pageConfig:{coinmarketcapCanRequest:!0},isTabFocused:function(){var a,b,c={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(a in c)if(a in document){b=c[a];break}return function(c){return c&&document.addEventListener(b,c),!document[a]}}};$(function(){Router.config({mode:"history"}),dataManager.config({coinmarketcap_api:config.data_manager.coinmarketcap_api}),App.lang=dataManager.getCookie("lang")?dataManager.getCookie("lang"):config.app.default_lang,$("#lang-switcher").val(App.lang).show(),$(document).on("click",".pg-link",function(a){a.preventDefault(),a.stopImmediatePropagation();var b=$(this).attr("href");"#"!=b&&""!=b&&Router.navigate(b)}),$(document).on("click",".pg-link-inactive",function(a){a.preventDefault(),a.stopImmediatePropagation()}),$(document).on("click",".pg-action",function(a){a.preventDefault(),a.stopImmediatePropagation();var b=$(this).attr("data").split("-"),c=b[0];b.shift();for(i in b)c+=b[i].charAt(0).toUpperCase()+b[i].slice(1);App.controller[c]($(this))}),$("select.lang-switcher").on("change",function(a){a.preventDefault(),a.stopImmediatePropagation(),dataManager.setCookie("lang",$(this).val(),config.app.lang_period),window.location.href="/"+Router.getFragment()});var a=function(){App.isTabFocused()?App.listener_interval!=config.app.interval&&(App.listener_interval=config.app.interval,clearInterval(App.listener),App.listener=setInterval(a,App.listener_interval)):App.listener_interval!=config.app.interval_not_focused&&(App.listener_interval=config.app.interval_not_focused,clearInterval(App.listener),App.listener=setInterval(a,App.listener_interval)),App.pageConfig.coinmarketcapCanRequest=!0,App.isTabFocused()};clearInterval(App.listener),App.listener_interval=config.app.interval,App.listener=setInterval(a,App.listener_interval)}),Router.add("about",function(){App.controller.pageAbout()}).add("faq",function(){App.controller.pageFaq()}).check().listen(),App.en_UK={texts:{}};